{
  "code": "import { ui } from \"../ui/layaMaxUI\";\r\nimport { AppConfig } from \"../AppConfig\";\r\nimport { shareToFriend, ShareType } from \"../utils/Share\";\r\nimport { insertCount } from \"../utils/Count\";\r\nimport Log from \"../utils/Log\";\r\nimport { Apps } from \"../utils/OtherApps\";\r\nimport DynamicWidget from \"../widget/DynamicWidget\";\r\nimport AllAppView from \"../widget/AllAppView\";\r\nexport default class HomePage extends ui.page.HomePageUI {\r\n    constructor() {\r\n        super();\r\n        this.height = AppConfig.screenH;\r\n        this.contentLayout.height = this.height;\r\n        this.btnStart.on(Laya.Event.CLICK, this, this.startGame);\r\n        this.btnLevel.on(Laya.Event.CLICK, this, this.clickLevel);\r\n        this.btnShare.on(Laya.Event.CLICK, this, this.clickShare);\r\n    }\r\n    clickShare(e) {\r\n        e.stopPropagation();\r\n        var query = 'uid=' + AppConfig.userId + '&token=' + (new Date().getTime()) + '&state=' + ShareType.HOME;\r\n        shareToFriend(null, query);\r\n    }\r\n    clickLevel(e) {\r\n        e.stopPropagation();\r\n    }\r\n    startGame(e) {\r\n        e.stopPropagation();\r\n        if (AppConfig.userData.level >= AppConfig.maxLevel) {\r\n            insertCount({ userId: AppConfig.userId, type: '通关', page: AppConfig.PAGENAME.HOMEPAGE });\r\n        }\r\n        else {\r\n        }\r\n    }\r\n    onEnable() {\r\n        Log.d(\"Home   onEnable\");\r\n        this.setApps();\r\n        this.setDynamicApps();\r\n        Laya.timer.loop(AppConfig.dynamicChangeTime * 1000, this, this.setDynamicApps);\r\n    }\r\n    onDisable() {\r\n        Log.d(\"Home onDisable\");\r\n        Laya.timer.clear(this, this.setApps);\r\n        Laya.timer.clear(this, this.setDynamicApps);\r\n    }\r\n    setApps() {\r\n        if (!AppConfig.ifShowApps) {\r\n            return;\r\n        }\r\n        this.allAppLayout.removeChildren(0, this.allAppLayout.numChildren);\r\n        this.allAppLayout.addChild(AllAppView.getSelf());\r\n    }\r\n    static getSelf() {\r\n        if (HomePage.self == null) {\r\n            HomePage.self = new HomePage();\r\n        }\r\n        return HomePage.self;\r\n    }\r\n    setDynamicApps() {\r\n        if (!AppConfig.ifShowApps)\r\n            return;\r\n        let num = this.dynamicLayout.numChildren;\r\n        let datas = Apps.getIcons(num);\r\n        if (!datas || datas.length == 0)\r\n            return;\r\n        for (let i = 0; i < datas.length; i++) {\r\n            let view = this.dynamicLayout.getChildAt(i);\r\n            DynamicWidget.getSelf(view, AppConfig.PAGENAME.HOMEPAGE, datas[i]);\r\n        }\r\n    }\r\n}\r\nHomePage.self = null;\r\n",
  "references": [
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/ui/layaMaxUI.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/AppConfig.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Share.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Count.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Log.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/OtherApps.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/widget/DynamicWidget.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/widget/AllAppView.ts"
  ]
}
