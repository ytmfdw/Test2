{
  "code": "import { ui } from \"../ui/layaMaxUI\";\r\nimport { insertCount } from \"../utils/Count\";\r\nimport { AppConfig } from \"../AppConfig\";\r\nimport { sharkAni } from \"../utils/Common\";\r\nexport default class DynamicWidget extends ui.item.appViewUI {\r\n    constructor() {\r\n        super();\r\n        this.index = -1;\r\n        this.father = null;\r\n        this.isAni = true;\r\n        this.pageName = null;\r\n        this.data = null;\r\n        this.scaleValue = 1;\r\n    }\r\n    onDisable() {\r\n        if (!this.destroyed) {\r\n            Laya.Pool.recover(\"DynamicWidget\", this);\r\n        }\r\n    }\r\n    adapter(context, pageName, data, noAni) {\r\n        this.father = context;\r\n        this.father.removeChildren(0, context.numChildren);\r\n        if (noAni) {\r\n            this.isAni = false;\r\n        }\r\n        this.on(Laya.Event.CLICK, this, this.clickGoToApp);\r\n        this.scaleValue = Math.min(this.father.width / 250, this.father.height / 300);\r\n        this.scale(this.scaleValue, this.scaleValue);\r\n        this.pos(this.father.width / 2, this.father.height / 2);\r\n        this.father.addChild(this);\r\n        this.pageName = pageName;\r\n        this.data = data;\r\n        if (this.data) {\r\n            this.setData(this.data);\r\n        }\r\n    }\r\n    clickGoToApp(e) {\r\n        e.stopPropagation();\r\n        if (!this.data)\r\n            return;\r\n        var thiz = this;\r\n        var data = this.data;\r\n        insertCount({ type: '点击悬浮按钮', mark: data.name + ',' + data.appid, page: thiz.pageName });\r\n        if (AppConfig.systemInfo.version > '2.2.0') {\r\n            wx.navigateToMiniProgram({\r\n                appId: data.appid,\r\n                path: data.path,\r\n                extraData: {\r\n                    from: AppConfig.APPNAME,\r\n                },\r\n                envVersion: 'release',\r\n                success: res => {\r\n                    insertCount({ type: '点击悬浮按钮,跳转成功', mark: data.name + ',' + data.appid, page: thiz.pageName });\r\n                    insertCount({ type: '跳转成功_' + data.name, mark: data.name + ',' + data.appid, page: thiz.pageName });\r\n                    insertCount({ type: '跳转成功', mark: thiz.pageName, page: thiz.pageName });\r\n                },\r\n                fail: e => {\r\n                }\r\n            });\r\n        }\r\n    }\r\n    static getSelf(context, pageName, data, noAni) {\r\n        let view = Laya.Pool.getItemByClass(\"DynamicWidget\", DynamicWidget);\r\n        view.adapter(context, pageName, data, noAni);\r\n        return view;\r\n    }\r\n    setData(data) {\r\n        this.data = data;\r\n        this.appName.changeText(data.name);\r\n        this.appIcon.skin = data.skin;\r\n        var thiz = this;\r\n        if (this.isAni) {\r\n            thiz.scale(0, 0);\r\n            Laya.Tween.to(thiz, { scaleX: this.scaleValue, scaleY: this.scaleValue }, 300, Laya.Ease.bounceOut, Laya.Handler.create(thiz, function () {\r\n                sharkAni(thiz, thiz);\r\n            }), 100);\r\n        }\r\n    }\r\n}\r\nDynamicWidget.lastIndex = -1;\r\n",
  "references": [
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/ui/layaMaxUI.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Count.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/AppConfig.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Common.ts"
  ]
}
