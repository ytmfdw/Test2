{
  "code": "import { ui } from \"../ui/layaMaxUI\";\r\nimport { getGradeName } from \"../utils/Question\";\r\nimport { grayView } from \"../utils/Common\";\r\nimport { insertCount } from \"../utils/Count\";\r\nimport { AppConfig } from \"../AppConfig\";\r\nimport { playSound, ERRSOUND } from \"../utils/Sound\";\r\nimport UiManager from \"../UiManager\";\r\nimport LevelDetailPage from \"../page/LevelDetailPage\";\r\nexport default class LevelItem extends ui.item.LevelItemUI {\r\n    constructor() {\r\n        super();\r\n        this.levelArr = null;\r\n        this.data = null;\r\n        this.onClick = function (e) {\r\n            e.stopPropagation();\r\n            insertCount({ userId: AppConfig.userId, type: '等级列表 点击', mark: '点击等级：' + this.data.grade, page: AppConfig.PAGENAME.LEVELPAGE });\r\n            if (!AppConfig.DEBUG && !this.data.isUnLock) {\r\n                playSound(ERRSOUND);\r\n                UiManager.getSelf().showToast('需完成' + (this.data.grade - 1) + \"级\");\r\n            }\r\n            else {\r\n                UiManager.getSelf().gotoPage(LevelDetailPage.getSelf());\r\n                LevelDetailPage.getSelf().init(this.data.grade, AppConfig.userData.level);\r\n            }\r\n        };\r\n        this.levelItemBg.on(Laya.Event.CLICK, this, this.onClick);\r\n    }\r\n    setData(data) {\r\n        this.data = data;\r\n        this.levelText.text = getGradeName(data.grade);\r\n        this.indexText.text = data.level + ' / ' + data.totalLevel;\r\n        this.levelItemBg.filters = null;\r\n        this.levelItemBg.destroyChildren();\r\n        if (data.isUnLock) {\r\n            this.setUnLock(data);\r\n        }\r\n        else {\r\n            this.setLock();\r\n        }\r\n    }\r\n    setUnLock(data) {\r\n        this.indexText.text = data.level + \" / \" + data.totalLevel;\r\n    }\r\n    setLock() {\r\n        this.indexText.text = \"\";\r\n        this.levelText.text = \"\";\r\n        grayView(this.levelItemBg);\r\n        let lock = new Laya.Image();\r\n        lock.skin = \"comp/stage_lock.png\";\r\n        lock.size(50, 50);\r\n        lock.anchorX = 0.5;\r\n        lock.anchorY = 0.5;\r\n        lock.pos(this.levelItemBg.width / 2, this.levelItemBg.height / 2);\r\n        this.levelItemBg.addChild(lock);\r\n    }\r\n}\r\n",
  "references": [
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/ui/layaMaxUI.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Question.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Common.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Count.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/AppConfig.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Sound.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/UiManager.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/page/LevelDetailPage.ts"
  ]
}
