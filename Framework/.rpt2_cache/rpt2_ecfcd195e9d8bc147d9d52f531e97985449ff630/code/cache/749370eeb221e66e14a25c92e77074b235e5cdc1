{
  "code": "import { ui } from \"../ui/layaMaxUI\";\r\nimport Log from \"../utils/Log\";\r\nimport { insertCount } from \"../utils/Count\";\r\nimport { AppConfig } from \"../AppConfig\";\r\nimport { playSound, ERRSOUND } from \"../utils/Sound\";\r\nimport UiManager from \"../UiManager\";\r\nimport { grayView } from \"../utils/Common\";\r\nimport GamePage from \"../page/GamePage\";\r\nexport const STATE_NORMAL = 1;\r\nexport const STATE_SELECTED = 2;\r\nexport const STATE_LOCKED = 3;\r\nexport const ITEM_SIZE = { w: 400, h: 500 };\r\nexport default class LevelDetailItem extends ui.item.LevelDetailItemUI {\r\n    constructor() {\r\n        super();\r\n        this.levelIndex = 1;\r\n        this.grade = 1;\r\n        this.index = 0;\r\n        this.father = null;\r\n        this.state = STATE_NORMAL;\r\n        this.on(Laya.Event.CLICK, this, this.click);\r\n        this.line.graphics.drawLine(0, 0, this.line.width, 0, \"#fff\", this.line.height);\r\n    }\r\n    click(e) {\r\n        e.stopPropagation();\r\n        Log.d(\"点击了 grade:\" + this.grade);\r\n        Log.d(\"点击了 index:\" + this.index);\r\n        Log.d(\"点击了 题目index ：\" + this.levelIndex);\r\n        insertCount({ userId: AppConfig.userId, type: '等级详情列表 点击', mark: '点击item：' + this.levelIndex, page: AppConfig.PAGENAME.LEVELDETAILPAGE });\r\n        if (!AppConfig.DEBUG && (this.state == STATE_LOCKED)) {\r\n            playSound(ERRSOUND);\r\n            UiManager.getSelf().showToast('需完成' + (this.index - 1) + \"关\");\r\n        }\r\n        else {\r\n            UiManager.getSelf().gotoPage(GamePage.getSelf());\r\n            GamePage.getSelf().initLevel(this.levelIndex);\r\n        }\r\n    }\r\n    onDisable() {\r\n        if (!this.destroyed) {\r\n            Log.d(\"回收 LevelDetailItem =========\");\r\n            Laya.Pool.recover(\"LevelDetailItem\", this);\r\n        }\r\n    }\r\n    init(grade, index, state) {\r\n        this.itemBg.filters = null;\r\n        this.grade = grade;\r\n        this.index = index;\r\n        this.state = state;\r\n        this.itemText.text = index + \"\";\r\n        this.levelIndex = (grade - 1) * AppConfig.GRADE_COUNT + index;\r\n        let star = 3;\r\n        this.textUnLock.visible = false;\r\n        switch (state) {\r\n            case STATE_NORMAL:\r\n                {\r\n                    this.lockImg.visible = false;\r\n                    let cache = wx.getStorageSync(AppConfig.LEVEL_ + this.levelIndex);\r\n                    if (cache && cache.star) {\r\n                        star = cache.star;\r\n                    }\r\n                }\r\n                break;\r\n            case STATE_SELECTED:\r\n                {\r\n                    this.lockImg.visible = false;\r\n                    this.textUnLock.visible = true;\r\n                    star = 0;\r\n                }\r\n                break;\r\n            case STATE_LOCKED:\r\n                {\r\n                    grayView(this.itemBg);\r\n                    this.lockImg.visible = true;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/ui/layaMaxUI.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Log.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Count.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/AppConfig.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Sound.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/UiManager.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Common.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/page/GamePage.ts"
  ]
}
