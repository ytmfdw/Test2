{
  "code": "import { AppConfig } from \"./AppConfig\";\r\nimport Log from \"./utils/Log\";\r\nimport BannerManager from \"./utils/Banner\";\r\nexport default class UiManager {\r\n    constructor() {\r\n        this.pageRoot = null;\r\n        this.toast = null;\r\n        this.model = null;\r\n        this.bgIndex = 0;\r\n        this.hasLoadBtnAni = false;\r\n        this.btnAni = null;\r\n    }\r\n    setRootPage(page) {\r\n        this.pageRoot = page;\r\n    }\r\n    getCurrentPage() {\r\n        let num = this.pageRoot.pageLayout.numChildren;\r\n        if (num > 0) {\r\n            let lastPage = this.pageRoot.pageLayout.getChildAt(num - 1);\r\n            return lastPage.name;\r\n        }\r\n        return AppConfig.PAGENAME.NONE;\r\n    }\r\n    static getSelf() {\r\n        if (!UiManager.self) {\r\n            UiManager.self = new UiManager();\r\n        }\r\n        return UiManager.self;\r\n    }\r\n    showToast(msg, time) {\r\n        wx.showToast({\r\n            icon: \"none\",\r\n            title: msg,\r\n            duration: time ? time : 1500\r\n        });\r\n    }\r\n    clearToast() {\r\n    }\r\n    isToastShowing() {\r\n        return false;\r\n    }\r\n    showModal(data) {\r\n        this.hideLoading();\r\n        wx.showModal({\r\n            title: data.title == void 0 ? \"温馨提示\" : data.title,\r\n            content: data.content == void 0 ? \"\" : data.content,\r\n            showCancel: data.showCancel == void 0 ? false : data.showCancel,\r\n            cancelText: data.cancelText == void 0 ? \"取消\" : data.cancelText,\r\n            confirmText: data.confirmText == void 0 ? \"确定\" : data.confirmText,\r\n            success: function (res) {\r\n                if (res.confirm) {\r\n                    if (data.success) {\r\n                        data.success();\r\n                    }\r\n                }\r\n                else if (res.cancel) {\r\n                    if (data.fail) {\r\n                        data.fail();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    gotoPage(page, noAni) {\r\n        Log.d('gotoPage  name=' + page.name);\r\n        if (AppConfig.isWX) {\r\n            BannerManager.getSelf().hideBanner(BannerManager.HIDE_ALL);\r\n        }\r\n        this.pageRoot.gotoPage(page, noAni);\r\n    }\r\n    closePage(page, noAni) {\r\n        this.pageRoot.closePage(page, noAni);\r\n    }\r\n    addPage(page, noAni) {\r\n        this.pageRoot.addPage(page, noAni);\r\n    }\r\n    goHome() {\r\n        if (AppConfig.isWX) {\r\n            BannerManager.getSelf().hideBanner(BannerManager.HIDE_ALL);\r\n        }\r\n        this.showOrHideTop(true);\r\n        this.pageRoot.goHome();\r\n    }\r\n    clearPage() {\r\n        this.pageRoot.clearPage();\r\n    }\r\n    showOrHideTop(flag) {\r\n        let thiz = UiManager.getSelf();\r\n        if (thiz.pageRoot.topLayout.visible == flag)\r\n            return;\r\n        Laya.Tween.clearAll(thiz.pageRoot.topLayout);\r\n        thiz.pageRoot.topLayout.visible = true;\r\n        Laya.Tween.to(thiz.pageRoot.topLayout, {\r\n            y: flag ? thiz.pageRoot.GuideFixOffset : (thiz.pageRoot.GuideFixOffset - thiz.pageRoot.height)\r\n        }, 500, flag ? Laya.Ease.bounceIn : Laya.Ease.bounceOut, Laya.Handler.create(thiz.pageRoot.topLayout, function () {\r\n            thiz.pageRoot.topLayout.visible = flag;\r\n        }));\r\n    }\r\n    setPowerNum(power) {\r\n        if (this.pageRoot) {\r\n            this.pageRoot.setPowerNum(power);\r\n        }\r\n    }\r\n    usePower(callBack, num) {\r\n    }\r\n    showLoading(data) {\r\n        if (AppConfig.isWX) {\r\n            wx.showLoading({\r\n                title: data ? data.title ? data.title : \"加载中...\" : '加载中...',\r\n                icon: data ? data.icon ? data.icon : \"none\" : \"none\",\r\n                mask: data ? (data.mask ? data.mask : true) : true\r\n            });\r\n        }\r\n    }\r\n    hideLoading() {\r\n        if (AppConfig.isWX) {\r\n            wx.hideLoading();\r\n        }\r\n    }\r\n    getPageHeight() {\r\n        return this.pageRoot.getPageHeight();\r\n    }\r\n    getTopOffset() {\r\n        return this.pageRoot.getTopOffset();\r\n    }\r\n    getFixOffset() {\r\n        return this.pageRoot.GuideFixOffset;\r\n    }\r\n    getLastPageName() {\r\n        return this.getCurrentPage();\r\n    }\r\n}\r\nUiManager.self = null;\r\n",
  "references": [
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/page/RootPage.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/AppConfig.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Log.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Banner.ts"
  ]
}
