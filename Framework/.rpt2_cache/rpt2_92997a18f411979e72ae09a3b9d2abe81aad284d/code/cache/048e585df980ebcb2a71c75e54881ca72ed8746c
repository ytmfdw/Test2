{
  "code": "import { ui } from \"../ui/layaMaxUI\";\r\nimport Log from \"../utils/Log\";\r\nimport { AppConfig } from \"../AppConfig\";\r\nimport HomePage from \"./HomePage\";\r\nexport default class PageRoot extends ui.page.RootPageUI {\r\n    constructor(width, height) {\r\n        super();\r\n        this.lastPage = null;\r\n        this.needAdaptation = false;\r\n        this.GuideFixOffset = 0;\r\n        Log.d(\"RootPage  constructor   \");\r\n        this.width = width;\r\n        this.height = height;\r\n        this.bgLayout.height = this.height + 20;\r\n        this.drawBg();\r\n        this.pageLayout.width = this.width;\r\n        this.pageLayout.height = this.height;\r\n        if (AppConfig.isWX && AppConfig.systemInfo) {\r\n            let model = AppConfig.systemInfo.model;\r\n            for (var i = wx.getMenuButtonBoundingClientRect(), n = [\"iPhone X\", \"华为P20\", \"华为麦芒7\", \"nubia Z18\", \"iPhone XR\", \"荣耀8X\", \"荣耀畅玩8C\", \"荣耀10\", \"荣耀Play\", \"荣耀9i\", \"vivo Y85\", \"vivo Y83\", \"vivo Y81s\", \"vivo X21\", \"vivo X23\", \"vivo X30\", \"vivo Z1\", \"vivo V9\", \"魅族X8\", \"一加6\", \"OPPO A3\", \"OPPO A7x\", \"OPPO R15\", \"OPPO R17\", \"小米红米6 Pro\", \"OnePlus A6010\", \"oneplus A6010\", \"坚果R1\", \"小米 Redmi Note 7\", \"小米 Redmi 7\", \"小米 PLAY \", \"小米8\", \"小米8 SE\", \"小米9\", \"小米9 SE\", \"小米红米6 Pro\", \"vivo U1\", \"vivo Z3\", \"vivo Z3i\", \"vivo Z1\", \"vivo Z1青春版\", \"vivo X23幻彩版 \", \"vivo Y81s\", \"vivo Y83\", \"vivo Y85\", \"vivo Y93\", \"vivo Y97\", \"vivo X21\", \"vivo X21s\", \"vivo X30\", \"vivo V9\", \"vivo iQOO\", \"华为nova 3\", \"华为nova 3i\", \"华为 nova 4e\", \"华为 畅享 MAX\", \"华为畅享9 Plus\", \"华为P30 Pro\", \"华为P20\", \"华为麦芒7\", \"华为Mate 20\", \"华为Mate 20 Pro\", \"荣耀10\", \"荣耀10青春版\", \"荣耀8X\", \"荣耀8X Max\", \"荣耀畅玩8C\", \"荣耀Play\", \"荣耀9i\", \"荣耀20i\", \"OPPO A3\", \"OPPO A5\", \"OPPO A7\", \"OPPO A7x全网通\", \"OPPO A7n\", \"OPPO R15\", \"OPPO R17\", \"OPPO R17 Pro\", \"OPPO K1\", \"联想 Z5S\", \"联想Z6 Pro\", \"三星Galaxy A8s\", \"三星Galaxy A90\", \"朵唯 D1\", \"海信 小海豚3\", \"海信 金刚4Pro\", \"中兴 ZTE V1000\", \"中兴AXON 10 Pro\", \"中兴Blade V10\", \"摩托罗拉 g7 plus\", \"诺基亚X6 2018\", \"诺基亚X7 2018\", \"小辣椒 红辣椒8X\", \"一加6\", \"一加6T\", \"魅族X8\", \"iPhone XR\"], s = 0; s < n.length; s++) {\r\n                var a = n[s], r = model.indexOf(a);\r\n                if (i && i.top > 20 || -1 != r) {\r\n                    Log.d(\"scaleX:::\" + AppConfig.scaleX);\r\n                    this.needAdaptation = !0, this.GuideFixOffset = AppConfig.iPhoneX / AppConfig.scaleX;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        AppConfig.topFixOffset = this.GuideFixOffset;\r\n    }\r\n    drawBg() {\r\n        let size = 64;\r\n        let xCount = Math.ceil(this.bgLayout.width / size);\r\n        let yCount = Math.ceil(this.bgLayout.height / size);\r\n        let bgRes = \"root/ic_bg.png\";\r\n        let g = this.bgLayout.graphics;\r\n        Laya.loader.load(bgRes, Laya.Handler.create(this.bgLayout, function () {\r\n            let texture = Laya.loader.getRes(bgRes);\r\n            for (let x = 0; x < xCount; x++) {\r\n                for (let y = 0; y < yCount; y++) {\r\n                    g.drawImage(texture, x * size, y * size, size, size);\r\n                }\r\n            }\r\n        }), null, Laya.Loader.IMAGE);\r\n    }\r\n    onEnable() {\r\n        Log.d(\"RootPage  onEnable\");\r\n    }\r\n    static getSelf(width, height) {\r\n        if (PageRoot.self == null) {\r\n            PageRoot.self = new PageRoot(width, height);\r\n        }\r\n        return PageRoot.self;\r\n    }\r\n    getPageHeight() {\r\n        return 0;\r\n    }\r\n    getTopOffset() {\r\n        let topOffset = this.height - this.getPageHeight();\r\n        Log.d(\"getTopOffset  =========\" + topOffset);\r\n        return topOffset;\r\n    }\r\n    addPage(page, noAni) {\r\n        page.alpha = 0;\r\n        if (this.numChildren > 0) {\r\n            this.lastPage = this.pageLayout.getChildAt(this.pageLayout.numChildren - 1);\r\n        }\r\n        this.pageLayout.addChild(page);\r\n        var duration = noAni ? 0 : AppConfig.PAGE_CHANGE_DURATION;\r\n        Laya.Tween.to(page, { alpha: 1 }, duration, Laya.Ease.linearNone);\r\n    }\r\n    gotoPage(page, noAni) {\r\n        page.alpha = 0;\r\n        this.pageLayout.addChild(page);\r\n        var duration = noAni ? 0 : AppConfig.PAGE_CHANGE_DURATION;\r\n        if (this.pageLayout.numChildren > 1) {\r\n            this.pageLayout.mouseEnabled = false;\r\n            this.lastPage = this.pageLayout.getChildAt(this.pageLayout.numChildren - 2);\r\n            var obj = {\r\n                alpha: 1\r\n            };\r\n            var thiz = this;\r\n            Laya.Tween.to(obj, {\r\n                alpha: 0, update: new Laya.Handler(this, function () {\r\n                    if (thiz.lastPage) {\r\n                        thiz.lastPage.alpha = obj.alpha;\r\n                    }\r\n                    page.alpha = 1 - obj.alpha;\r\n                })\r\n            }, duration, Laya.Ease.linearNone, Laya.Handler.create(this, function () {\r\n                if (thiz.lastPage) {\r\n                    thiz.pageLayout.removeChild(thiz.lastPage);\r\n                }\r\n                thiz.pageLayout.mouseEnabled = true;\r\n            }));\r\n        }\r\n        else {\r\n            Laya.Tween.to(page, { alpha: 1 }, duration, Laya.Ease.linearNone);\r\n        }\r\n    }\r\n    closePage(page, noAni) {\r\n        var duration = noAni ? 0 : AppConfig.PAGE_CHANGE_DURATION;\r\n        if (page) {\r\n            this.gotoPage(page, noAni);\r\n        }\r\n        else {\r\n            if (this.lastPage) {\r\n                this.gotoPage(this.lastPage, noAni);\r\n            }\r\n            else {\r\n                this.goHome();\r\n            }\r\n        }\r\n    }\r\n    setPowerNum(num) {\r\n    }\r\n    goHome() {\r\n        this.clearPage();\r\n        this.addPage(HomePage.getSelf());\r\n    }\r\n    clearPage() {\r\n        this.pageLayout.removeChildren(0, this.pageLayout.numChildren);\r\n    }\r\n}\r\n",
  "references": [
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/ui/layaMaxUI.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/utils/Log.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/AppConfig.ts",
    "E:/game/Growup/Laya2Framework/Framework/Framework/src/page/HomePage.ts"
  ]
}
